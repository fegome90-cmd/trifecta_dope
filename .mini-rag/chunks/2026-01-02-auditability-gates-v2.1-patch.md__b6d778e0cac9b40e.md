| Gate | Criterio PASS | Comando Exacto (RC preservado) | Evidencia Requerida | APs Evitados |
|------|---------------|-------------------------------|---------------------|-------------|
| **G1: Baseline reproducible** | `pytest --collect-only` retorna RC=0 (NO "ERROR collecting") | `uv run pytest --collect-only -q 2>&1 \| tee /tmp/g1_pytest.log; G1_RC=\${PIPESTATUS[0]}; echo "G1_RC=$G1_RC"` | (1) `/tmp/g1_pytest.log` (stdout/stderr crudo), (2) `G1_RC` (0=PASS) | AP6, AP7 |
| **G2: Path Hygiene (no PII)** | `_ctx/context_pack.json` NO contiene `/Users/`, `/home/`, `file://` | `uv run trifecta ctx sync -s . 2>&1 \| tee /tmp/g2_sync.log; SYNC_RC=\${PIPESTATUS[0]}; rg -n '"/Users/\|"/home/\|file://' _ctx/context_pack.json 2>&1 \| tee /tmp/g2_rg.log; RG_RC=\${PIPESTATUS[0]}; echo "G2_SYNC=$SYNC_RC"; echo "G2_RG=$RG_RC"` | (1) `/tmp/g2_sync.log`, (2) `/tmp/g2_rg.log`, (3) `SYNC_RC` (0=sync ok), (4) `RG_RC` (1=no matches=PASS) | AP6, AP7, AP10 |
| **G3: ast symbols operable** | `trifecta ast symbols` NO retorna FILE_NOT_FOUND, JSON es parseable | `uv run trifecta ast symbols sym://python/mod/context_service > /tmp/g3_ast.json 2> /tmp/g3_ast.stderr; AST_RC=$?; STATUS=\$(jq -r '.status // "parse_error"' /tmp/g3_ast.json 2>&1 \| tee /tmp/g3_jq.log); CODE=\$(jq -r '.errors[0].code // "null"' /tmp/g3_ast.json); echo "G3_AST=$AST_RC"; echo "G3_STATUS=$STATUS"; echo "G3_CODE=$CODE"` | (1)
