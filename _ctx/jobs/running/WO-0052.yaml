version: 1
id: WO-0052
epic_id: E-SCALE
title: Implementar ZeroHitTracker para logueo estructurado
priority: P1
status: running
owner: felipe_gonzalez
scope:
  allow:
  - src/application/zero_hit_tracker.py
  - src/application/search_get_usecases.py
  - src/application/telemetry_health.py
  deny:
  - .env*
verify:
  commands:
  - uv run pytest tests/unit/test_zero_hit_tracker.py -v
dod_id: DOD-DEFAULT
execution:
  engine: trifecta
  required_flow:
  - session.append:intent
  - ctx.sync
  - ctx.search
  - ctx.get
  - session.append:result
  segment: .
trace:
  ticket: null
  related_wos:
  - WO-0050
  - WO-0051
claim_links:
  requirements:
  - ZeroHitTracker module con hook en search=0
  - Emite evento ctx.search.zero_hit a events.jsonl
  - Archivo agregado zero_hits.ndjson deduplicado
  - telemetry health muestra top_zero_hit_queries
assumptions:
- Ya existe deteccion de zero-hit en search_get_usecases.py
constraints:
- No guardar query raw si contiene PII
- Archivo agregado debe ser pequeno (<100KB)
objective: 'Implementar ZeroHitTracker para logueo estructurado de zero-hits. Deduplicar
  por query_hash y mantener contador. Integrar con telemetry health. '
deliverables:
- Modulo ZeroHitTracker en src/application/zero_hit_tracker.py
- Hook en search_get_usecases.py que emite cuando hits=0
- Archivo _ctx/telemetry/zero_hits.ndjson deduplicado
- 'Integracion con telemetry health: top_zero_hit_queries'
- Tests unitarios para ZeroHitTracker
diff_budget:
  max_files: 5
  max_loc: 200
stop_conditions:
  max_iterations: 3
  max_fail_verify: 2
started_at: '2026-02-15T21:23:53.681256+00:00'
branch: job/WO-0052
worktree: ../.worktrees/WO-0052
