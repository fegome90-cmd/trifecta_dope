version: 1
id: WO-0010-legacy
epic_id: E-0001
title: 'Field Exercises v1: Real-World Query A/B Evaluation'
priority: P1
status: done
owner: null
scope:
  allow:
  - eval/field_exercises_v1.yaml
  - eval/scripts/run_field_exercises_ab.py
  - docs/reports/field_exercises_v1_results.md
  - _ctx/logs/field_ex_*.log
  deny:
  - src/**
  - .env*
verify:
  commands:
  - uv run python eval/scripts/run_field_exercises_ab.py --validate
  - grep 'zero_hit_rate:' docs/reports/field_exercises_v1_results.md
dod_id: DOD-FIELD_EXERCISES
x_objective: "Validar el sistema de b\xFAsqueda con queries reales del mundo real.\n\
  \nDataset: 20 queries representativas de casos de uso reales\nA/B: Comparar OFF\
  \ (sin linter) vs ON (con linter)\nM\xE9tricas: hit_rate, zero_hit_rate, precision@5\n\
  Gate: zero_hit_rate < 30% (al menos 70% de queries retornan resultados)\n"
x_deliverables:
- eval/field_exercises_v1.yaml (20 queries reales con expected hits)
- eval/scripts/run_field_exercises_ab.py (runner automatizado)
- "docs/reports/field_exercises_v1_results.md (m\xE9tricas + an\xE1lisis)"
- _ctx/logs/field_ex_{off,on}.log (evidencia CLI)
x_acceptance_criteria:
- "Dataset tiene 20 queries variadas (t\xE9cnicas, conceptuales, vagas, espec\xED\
  ficas)"
- "Cada query tiene expected_min_hits (baseline m\xEDnimo)"
- "Runner ejecuta: OFF \u2192 captura hits, ON \u2192 captura hits"
- 'Reporte muestra: zero_hit_rate, avg_hits, delta ON-OFF'
- "Gate: zero_hit_rate_on < 30% (m\xE1ximo 6 queries sin resultados)"
diff_budget:
  max_files: 8
  max_loc: 300
x_dependencies:
- wo_id: WO-0008
- wo_id: WO-0009
x_risks:
- "Queries demasiado espec\xEDficas \u2192 falsos negativos (no match por dataset\
  \ peque\xF1o)"
- Zero-hit rate puede ser alto si dataset incompleto
x_mitigation:
- "Mezclar tipos de query: 30% t\xE9cnicas, 30% conceptuales, 40% discovery"
- Usar queries que sabemos que deben matchear contenido existente
- "Si zero_hit_rate > 30%, documentar queries problem\xE1ticas para iteraci\xF3n"
x_notes: "Este WO establece el primer benchmark cuantitativo del sistema de b\xFA\
  squeda.\n\nNo es un test unitario: es una evaluaci\xF3n de calidad en queries reales.\n\
  Si el gate falla, indica que el sistema necesita mejoras (no que el c\xF3digo est\xE1\
  \ roto).\n"
execution:
  engine: trifecta
  required_flow:
  - verify
  segment: .
